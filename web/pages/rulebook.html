<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Maeri RPG – Rulebook</title>

  <meta name="description" content="Maeri RPG Core Rulebook" />

  <!-- Styles -->
  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/floatingButtons.css" />
  <link rel="stylesheet" href="../css/toc.css" />
  <link rel="stylesheet" href="../css/dice.css" />
  <link rel="stylesheet" href="../css/rulebook.css" />
  <link rel="stylesheet" href="../css/spells.css" />
  <link rel="stylesheet" href="../css/sheet.css" />
</head>

<body>

  <!-- =========================
       Header + Search
  ========================== -->
  <header>
    <h1>Maeri RPG</h1>
    <p>Core Rulebook</p>

    <div
      id="rulebook-search"
      class="search-container"
      role="search"
      aria-label="Search rules"
    >
      <input
        type="search"
        id="search-input"
        placeholder="Search rule, term or action..."
        autocomplete="off"
      />
      <div
        id="search-results"
        class="search-results hidden"
        aria-live="polite"
      ></div>
    </div>
  </header>

  <!-- =========================
       Rulebook TOC
  ========================== -->

  <!-- Toggle -->
  <button
    id="toc-toggle"
    aria-label="Open Rulebook Index"
    aria-expanded="false"
  >
    ☰
  </button>

  <!-- Overlay -->
  <div id="toc-overlay"></div>

  <!-- Panel -->
  <div
    id="toc-panel"
    aria-hidden="true"
    role="navigation"
    aria-label="Rulebook Index"
  >

    <p id="toc-chapter-title" class="toc-chapter-title">—</p>

    <select
      id="chapter-select"
      aria-label="Select chapter"
    ></select>

    <div class="chapter-nav">
      <button id="chapter-prev" type="button" class="button">
        ← Previous
      </button>
      <button id="chapter-next" type="button" class="button">
        Next →
      </button>
    </div>

    <ul id="toc-list"></ul>
  </div>

  <!-- =========================
       Main Content
  ========================== -->
  <main class="rulebook" role="main">
    <div id="rulebook-content"></div>
  </main>

  <!-- =========================
       Floating Action Buttons
  ========================== -->
  <aside class="floating-actions" aria-label="Rulebook actions">

    <button
      id="back-to-top"
      class="floating-button floating-button--pill floating-button--icon"
      aria-label="Back to Top"
      title="Back to Top"
    >
      ↑
    </button>

    <a
      href="../index.html"
      id="back-to-home"
      class="floating-button floating-button--pill floating-button--icon"
      aria-label="Back to Home"
      title="Back to Home"
    >
      ⌂
    </a>

    <button
      id="sheet-button"
      class="floating-button floating-button--pill floating-button--primary"
      aria-label="Open Character Sheet"
    >
      Ficha
    </button>

    <button
      id="spells-button"
      class="floating-button floating-button--pill floating-button--secondary"
      aria-label="Open Spells"
    >
      Magias
    </button>

        <button
      id="dice-toggle"
      class="floating-button floating-button--pill"
      aria-label="Open Dice Roller"
      aria-expanded="false"
    >
      Dados
    </button>

  </aside>

  <!-- =========================
        Dice Roller (Global)
  ========================== -->

  <!-- Overlay -->
  <div id="dice-overlay"></div>

  <!-- Panel -->
  <div id="dice-panel">
    <div class="dice-content">

      <section id="dice-buttons">
        <div class="dice-btn" data-sides="2">
          <button>d2</button>
          <span class="counter" id="count-d2">0</span>
        </div>

        <div class="dice-btn" data-sides="3">
          <button>d3</button>
          <span class="counter" id="count-d3">0</span>
        </div>

        <div class="dice-btn" data-sides="6">
          <button>d6</button>
          <span class="counter" id="count-d6">0</span>
        </div>
      </section>

      <section class="dice-actions">
        <button id="roll-button" class="button">Roll</button>
        <button id="clear-all" class="button">Clear</button>
      </section>

      <section id="result">
        <div class="result-line">
          <strong>Rolls:</strong>
          <span id="result-output">—</span>
        </div>

        <div class="result-line total">
          <strong>Total:</strong>
          <span id="total-output">—</span>
        </div>
      </section>

      <section id="history">
        <h3>History</h3>
        <ul id="history-output"></ul>
        <button id="clear-history" class="button">Clear</button>
      </section>

    </div>
  </div>

  <!-- =========================
        Character Sheet Modal
  ========================== -->

  <div
    id="sheet-overlay"
    class="sheet-overlay"
    aria-hidden="true"
    inert
  ></div>

  <section
    id="sheet-modal"
    class="sheet-modal"
    aria-hidden="true"
    inert
  >

    <header class="sheet-header">
      <h2 id="sheet-title">Ficha de Personagem</h2>

      <button
        id="sheet-close"
        class="sheet-close"
        aria-label="Close Character Sheet"
      >
        ✕
      </button>
    </header>

    <div class="sheet-content">

      <section class="sheet-section">
        <label for="character-name">Personagem</label>
        <input
          type="text"
          id="character-name"
          name="characterName"
          placeholder="Nome do personagem"
        />
      </section>

      <section class="sheet-section attributes">
        <h3>Atributos</h3>

        <div class="attributes-grid">
          <label>F <input type="number" min="0" name="attrF" /></label>
          <label>V <input type="number" min="0" name="attrV" /></label>
          <label>D <input type="number" min="0" name="attrD" /></label>
          <label>S <input type="number" min="0" name="attrS" /></label>
          <label>I <input type="number" min="0" name="attrI" /></label>
          <label>A <input type="number" min="0" name="attrA" /></label>
        </div>
      </section>

      <section class="sheet-section">
        <label for="character-info">Informações</label>
        <textarea
          id="character-info"
          name="characterInfo"
          placeholder="Habilidades, estudos, magias, anotações..."
          rows="6"
        ></textarea>
      </section>

      <section class="sheet-section">
        <label for="character-items">Itens</label>
        <textarea
          id="character-items"
          name="characterItems"
          placeholder="Inventário do personagem"
          rows="4"
        ></textarea>
      </section>

      <section class="sheet-section sheet-danger">
        <button
          id="clear-sheet-button"
          class="sheet-clear-button"
          type="button"
        >
          Limpar ficha
        </button>

        <div
          id="clear-confirmation"
          class="clear-confirmation"
          hidden
        >
          <p>Tem certeza? Essa ação não pode ser desfeita.</p>

          <div class="clear-actions">
            <button
              id="confirm-clear-sheet"
              class="danger"
              type="button"
            >
              Sim, apagar
            </button>

            <button
              id="cancel-clear-sheet"
              type="button"
            >
              Cancelar
            </button>
          </div>
        </div>
      </section>

    </div>
  </section>

  <!-- =========================
      Spells Modal
  ========================== -->

  <!-- Overlay -->
  <div
    id="spells-overlay"
    class="spells-overlay"
    aria-hidden="true"
    inert
  ></div>

  <!-- Modal -->
  <section
    id="spells-modal"
    class="spells-modal"
    aria-hidden="true"
    inert
  >

    <!-- Header -->
    <header class="spells-header">
      <h2>Magias</h2>

      <button
        id="spells-close"
        class="spells-close"
        aria-label="Close Spells"
      >
        ✕
      </button>
    </header>

    <!-- Toolbar -->
    <div class="spells-toolbar">

      <input
        type="search"
        id="spells-search"
        placeholder="Buscar magia..."
        aria-label="Search spells"
      />

      <div class="spells-sort">
        <button data-sort="name" class="active">A–Z</button>
        <button data-sort="school">Escola</button>
        <button data-sort="level">Nível</button>
      </div>

    </div>

    <!-- Content -->
    <div class="spells-content">
      <ul id="spells-list" class="spells-list"></ul>
    </div>

  </section>

  <!-- =========================
       Scripts
  ========================== -->
  <script type="module" src="../js/sheet.js"></script>
  <script type="module" src="../js/spells.js"></script>
  <script src="../js/dice.js"></script>
  <script type="module" src="../js/rulebook/main.js"></script>

</body>
</html>
